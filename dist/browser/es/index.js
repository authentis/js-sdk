import e from"../../node_modules/@babel/runtime-corejs3/helpers/asyncToGenerator";import t from"../../node_modules/@babel/runtime-corejs3/regenerator";import a from"../../node_modules/@babel/runtime-corejs3/core-js/instance/index-of.js";import s from"../../node_modules/@babel/runtime-corejs3/core-js/url.js";import r from"../../node_modules/@babel/runtime-corejs3/core-js/instance/map.js";import o from"../../node_modules/@babel/runtime-corejs3/core-js/object/keys.js";import i from"../../node_modules/@babel/runtime-corejs3/core-js/json/stringify.js";import c from"../../node_modules/@babel/runtime-corejs3/core-js/object/assign.js";function h(){return{handshake:this.createRequest.call(this,{method:"PUT",path:"/captcha"}),verify:this.createRequest.call(this,{method:"POST",path:"/captcha"})}}function n(){return{state:this.createRequest.call(this,{method:"GET",path:"/auth/state"}),session:this.createRequest.call(this,{method:"POST",path:"/auth/session"}),epwd:this.createRequest.call(this,{method:"POST",path:"/auth/signin/epwd"}),epwdv:this.createRequest.call(this,{method:"PUT",path:"/auth/signin/epwd"}),eotp:this.createRequest.call(this,{method:"POST",path:"/auth/signin/eotp"}),eotpv:this.createRequest.call(this,{method:"PUT",path:"/auth/signin/eotp"}),potp:this.createRequest.call(this,{method:"POST",path:"/auth/signin/potp"}),potpv:this.createRequest.call(this,{method:"PUT",path:"/auth/signin/potp"}),revoke:this.createRequest.call(this,{method:"DELETE",path:"/auth/revoke"})}}function p(){return{create:this.createRequest.call(this,{method:"POST",path:"/org"}),update:this.createRequest.call(this,{method:"PUT",path:"/org"}),get:this.createRequest.call(this,{method:"GET",path:"/org"}),remove:this.createRequest.call(this,{method:"DELETE",path:"/org"})}}function l(){return{create:this.createRequest.call(this,{method:"POST",path:"/project"}),update:this.createRequest.call(this,{method:"PUT",path:"/project"}),get:this.createRequest.call(this,{method:"GET",path:"/project"}),remove:this.createRequest.call(this,{method:"DELETE",path:"/project"}),signinMethod:{create:this.createRequest.call(this,{method:"POST",path:"/project/signin-method"}),update:this.createRequest.call(this,{method:"PUT",path:"/project/signin-method"}),get:this.createRequest.call(this,{method:"GET",path:"/project/signin-method"}),remove:this.createRequest.call(this,{method:"DELETE",path:"/project/signin-method"})}}}function u(){return{create:this.createRequest.call(this,{method:"POST",path:"/app"}),update:this.createRequest.call(this,{method:"PUT",path:"/app"}),get:this.createRequest.call(this,{method:"GET",path:"/app"}),remove:this.createRequest.call(this,{method:"DELETE",path:"/app"})}}function d(){return{inspect:this.createRequest.call(this,{method:"PUT",path:"/device"})}}function m(e){return this.config={host:e.host||"https://auth.gozel.com.tr",version:e.version||null,projectIdentifier:e.projectIdentifier||"",projectLocale:e.locale||"",token:e.token||null,clientId:e.clientId||null,clientSecret:e.clientSecret||null},this.setLastResponse=function(e){this.lastResponse=e},this.getLastResponse=function(){return this.lastResponse},this.createAuthHeader=function(e){return e.token?"Bearer "+e.token:e.clientId&&e.clientSecret?"Basic "+btoa(e.clientId+":"+e.clientSecret):""},this.createHeaders=function(e){var t;return c({},{Accept:"application/json","Cache-Control":"no-cache",Pragma:"no-cache"},-1!==a(t=["POST","PUT"]).call(t,e.method)?{"Content-Type":"application/json"}:{},{Authorization:this.createAuthHeader(this.config)},this.config.projectIdentifier?{"Authentis-Project-Identifier":this.config.projectIdentifier}:{},this.config.projectLocale?{"Authentis-Project-Locale":this.config.projectLocale}:{})},{getLastResponse:this.getLastResponse.bind(this),captcha:h.apply(this),auth:n.apply(this),organization:p.apply(this),project:l.apply(this),app:u.apply(this),device:d.apply(this)}}function j(c){var h,n=this;a(h=["POST","PUT"]).call(h,c.method);var p={method:c.method,credentials:"same-origin",mode:"cors",headers:n.createHeaders.call(n,c)};return function(){var a=e(t.mark((function e(){var a,h,l,u,d,m=arguments;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=m.length>0&&void 0!==m[0]?m[0]:{},h=new s(c.path,n.config.host),a.path&&Array.isArray(a.path)&&(h.pathname+="/"+a.path.join("/")),a.searchParams&&r(l=o(a.searchParams)).call(l,(function(e){return h.searchParams.set(e,a.searchParams[e])})),!a.id){e.next=8;break}if(!/[^a-zA-Z0-9-]+/.test(a.id)){e.next=7;break}return e.abrupt("return",{error:{code:"REQUEST_ERROR",details:"Invalid identifier."}});case 7:h.pathname=c.path+"/"+a.id;case 8:return a.body&&("[object Object]"===Object.prototype.toString.call(a.body)?p.body=i(a.body):p.body=a.body),e.prev=9,e.next=12,fetch(h,p);case 12:return u=e.sent,n.setLastResponse.call(n,u),e.next=16,u.json();case 16:return d=e.sent,e.abrupt("return",d);case 20:return e.prev=20,e.t0=e.catch(9),e.abrupt("return",{error:{code:"REQUEST_ERROR"}});case 23:case"end":return e.stop()}}),e,null,[[9,20]])})));return function(){return a.apply(this,arguments)}}()}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m.call({createRequest:j},e)}export{f as configure,j as createRequest};
